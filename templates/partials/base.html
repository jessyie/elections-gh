{% load compress %}
{% load static %}
<!doctype html>
<html lang="en">

<head>
  <!-- Requir %}ed meta tags -->
  <title> Electoral Dashboard :: Home</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <link rel="stylesheet" href="{% static 'map.css' %}">
  <link rel="stylesheet" href="{% static 'map2.css' %}"> 
  <link rel="stylesheet" href="{% static 'css/index.css' %}">
  <link rel="stylesheet" href="{% static 'css/index2.css' %}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <!--<link rel="stylesheet" href="https://unpkg.com/leaflet@latest/dist/leaflet.css" />-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
  <!--<link rel="stylesheet" href="https://unpkg.com/leaflet.fullscreen@latest/Control.FullScreen.css"/>-->


  <!-- Bootstrap CSS -->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">


  <title>Geoproject</title>
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  <script type="text/javascript" src="https://code.highcharts.com/stock/highstock.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/modules/export-data.js"></script>
  <script src="https://code.highcharts.com/modules/accessibility.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <!--<script src="https://unpkg.com/leaflet@latest/dist/leaflet.js"></script>-->

  <!-- <script type="text/javascript" src="{% static 'chartjs/chart.js' %}"></script> -->




  <!-- We're going to import a bunch of scripts here. If it doesn't work, we'll remove them -->
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
  <link rel="stylesheet" href="{% static '/leaflet-search-master/leaflet-search-master/dist/leaflet-search.src.css' %}">
  <!--<link rel="stylesheet" href="https://unpkg.com/leaflet.fullscreen@latest/Control.FullScreen.css" />-->
  <script src="https://unpkg.com/leaflet.featuregroup.subgroup@1.0.2/dist/leaflet.featuregroup.subgroup.js"></script>
  <script type="text/javascript" src="{% static '/leaflet-search-master/leaflet-search-master/dist/leaflet-search.src.js' %}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.fullscreen/1.4.2/Control.FullScreen.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.fullscreen/1.4.2/Control.FullScreen.min.css"/>
  <script type="text/javascript" src="{% static 'choropleth.js' %}"></script>
  <!--<script src="https://unpkg.com/leaflet.fullscreen@latest/Control.FullScreen.js"></script>-->
  <!--<link rel="stylesheet" type="text/css" href="{% static 'Control.FullScreen.css' %}">
  <script type="text/javascript" src="{% static 'Control.FullScreen.js'}"></script>-->


  <!-- ======================================== -->

</head>

<body>
  <nav class="navbar navbar-expand-md na fixed-top" id="bar1" style="background-color: #ced4da;">
    <div class="container-fluid" id="bar2">
      <a class="navbar-brand item1" id="nano_1" href="#">PRESIDENTIAL</a>

      <select id='regionSelection' class=btn-secondary>
        <option value="National">National</option>
        <option value="Regions">Regions</option>
        {% for ga in graph1BX %}
        <option value="{{ga}}">{{ga}}</option>
        {% endfor %}
        
      </select>

      <a class="navbar-brand item2" id="title_1" href="#">
        <h1 class="title_1A"><span class="title_1B">ELECTORAL DASHBOARD</span><span class="title_1C">|</span><span class="title_1D">REPUBLIC OF GHANA</span></h1>
      </a>

      <button id="refetchButton"><i class="fa-solid fa-rotate-right fa-sm"></i><span class="hover-text3_reset">Refresh Year</span></button> 
      <select id='yearSelection' class=btn-secondary>
        <option selected value="">Years</option>
        <option value="2024">2024</option>
        <option value="2020">2020</option>
        <option value="2016">2016</option>
        <option value="2012">2012</option>
        <option value="2009">2008 Runoff</option>
        <option value='2008'>2008</option>
        <option value='2004'>2004</option>
             
      </select>
      <div>
        <button type="button" class="btn btn-primary" id="but1" data-toggle="modal" data-target="#exampleModal">
          ABOUT
        </button>
        <a class="navbar-brand item3" id="nano_2" href="#">PARLIAMENT</a>
        <a href="{% url 'logout' %}" class="btn btn-primary" id="logout1">Logout</a>
      </div>
      

    </div>

  </nav>


  {% block content %}


  {% endblock %}

  <!-- {% block scripts %}

  {% endblock %} -->

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="{% static 'bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  {% compress js %}
  <script type="text/javascript" src="{% static 'chartjs/chart.js' %}"></script>
  <script type="text/javascript" src="{% static 'chartjs/chartmain.js' %}"></script>
  {% endcompress %}


<!-- 
  <script type="text/javascript">
window.onload = function() {
    var updateLayerVisibility = function() {
        var mapZoom = map_name_1.getZoom();
        
        // Check the zoom level and show/hide the ps_group layer
        if (mapZoom >= 6) {
            map_name_1.addLayer(feature_group_sub_group_4e7634126027285475f177d911e25d0c);
        } else {
            map_name_1.removeLayer(feature_group_sub_group_4e7634126027285475f177d911e25d0c);
        }
    }
    
    updateLayerVisibility();
    
    map_name_1.on("zoomend", updateLayerVisibility);
}

    var initialView = map_name_1.getBounds();

    function resetMap() {
      map_name_1.setView(initialView.getCenter(), 6);
      map_name_1.addLayer(layer_control_f7171e288f87cfdcc249797c44e88a3a.overlays["Polling Stations (PS)"]);

       geo_json_64e24e643e750814cf677bcd906ed09c.eachLayer(function(layer) {
          layer.setStyle({
            // Set your highlighting style here
            fillOpacity: 0
          });
        })


       geo_json_9df167a58514ed5ed641a24d06de19fa.eachLayer(function(layer) {
          layer.setStyle({
            // Set your highlighting style here
            fillOpacity: 0
          });
        })
    }


    const searchControl1 = new L.Control.Search({
                    layer: layer_control_f7171e288f87cfdcc249797c44e88a3a.overlays["Polling Stations (PS)"],
                    zoom: '15',
                    propertyName: 'PS Name',
                    textPlaceholder: 'Search PS Name',
                    hideMarkerOnCollapse: true
                    }).addTo(map_name_1);

</script> -->
    
  
  
 <!-- 
  <script type="text/javascript">
    function updateMap(region, year) {

    let activeRegion = ""

    if (year === "2008" || year === "2008_Re-elected" || year === "2012" || year === "2016") {
        map_name_1.removeLayer(layer_control_f7171e288f87cfdcc249797c44e88a3a.overlays["16_Regions"]);
        map_name_1.addLayer(layer_control_f7171e288f87cfdcc249797c44e88a3a.overlays["Regions"]);
        activeRegion = geo_json_64e24e643e750814cf677bcd906ed09c
    } else {
        map_name_1.removeLayer(layer_control_f7171e288f87cfdcc249797c44e88a3a.overlays["Regions"]);
        map_name_1.addLayer(layer_control_f7171e288f87cfdcc249797c44e88a3a.overlays["16_Regions"]);
        activeRegion = geo_json_9df167a58514ed5ed641a24d06de19fa

    }

    highlightRegion(activeRegion, region)
    return
    }

    function highlightRegion(activeRegion, regionID) {
      if(!regionID) regionID = ""
      activeRegion.eachLayer(function(layer) {
        if (layer.feature.properties.region == regionID.toUpperCase()) {
          map_name_1.removeLayer(layer_control_f7171e288f87cfdcc249797c44e88a3a.overlays["Polling Stations (PS)"]);
            layer.setStyle({
                fillColor: 'yellow', // Set your highlighting style here
                fillOpacity: 0.8
            });
        } 
        else {
            layer.setStyle({
                fillOpacity: 0
            });
        }
    });
}
    
  </script> -->
  
    
  
  

</body>

</html>